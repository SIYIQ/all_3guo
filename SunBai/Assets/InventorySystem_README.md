# 完全重写后的背包系统说明

## 概述
本次完全重写了背包系统，采用最简化的设计：**拾取物品 → 添加到背包 → 按键直接消耗 → 消耗后自动消失**。

## 系统流程

### 1. 背包管理
- 按 `I` 键打开/关闭背包界面
- 背包显示所有物品，支持相同物品的计数聚合
- 分为"装备"和"消耗品"两个标签页
- **注意：系统不再包含拾取逻辑，物品需要通过其他方式添加到背包**

### 2. 使用消耗品（极简化设计）
- **无需装备步骤！** 直接按键使用背包中的消耗品
- 按 `1` 键使用HP药水（名称包含"HP"的消耗品）
- 按 `2` 键使用MP药水（名称包含"MP"的消耗品）
- 使用后直接从背包消失，恢复HP/MP

## 主要修改

### 已删除的脚本
- **PlayerCollector.cs**：删除拾取逻辑
- **ItemPickup.cs**：删除拾取物品组件
- **InventoryDemoBootstrap.cs**：删除演示脚本

### PlayerConsumableController.cs
- **完全重写**：不再管理道具槽，直接从背包查找和消耗物品
- 按关键词匹配消耗品类型（HP/MP）
- 简化按键逻辑，移除复杂的槽位管理

### InventoryUI.cs
- 保持物品管理和UI显示功能
- 物品现在需要通过代码手动添加到背包

## 组件依赖

### PlayerConsumableController
- 需要挂在玩家对象上
- 配置关键词和按键映射
- 默认：按键1使用HP药水，按键2使用MP药水

### InventoryUI
- 管理背包界面和物品存储
- 可以通过代码调用 `AddItemToInventory()` 方法添加物品

## 使用说明

### 快速设置背包UI
1. 在场景中创建一个空对象，命名为"InventorySetup"
2. 添加 `InventorySetupWizard` 组件
3. 按Play运行，脚本会自动创建完整的背包UI
4. 或者手动创建UI组件并在Inspector中赋值

### 添加物品到背包
通过代码添加物品：
```csharp
InventoryUI inventoryUI = FindObjectOfType<InventoryUI>();
inventoryUI.AddItemToInventory(itemData, count);
```

### 测试背包功能
1. 添加 `InventoryTestHelper` 组件到场景中
2. 在Inspector中为 `testItem` 赋值一个ItemData
3. 运行游戏：
   - 按 `I` 键切换背包显示
   - 按 `T` 键添加测试物品
   - 按 `Y` 键强制显示背包
   - 按 `U` 键强制隐藏背包
   - 按 `1` 键使用HP药水
   - 按 `2` 键使用MP药水

### 背包功能说明
- **装备系统**：拖拽武器/装备到对应槽位
- **消耗品使用**：按1/2键直接使用背包中的消耗品
- **标签切换**：点击标签按钮切换装备/消耗品视图
- **武器集成**：装备武器后状态栏实时更新

## 注意事项

- 消耗品按名称关键词匹配（HP/MP），确保物品命名规范
- 按键直接消耗背包中的第一个匹配物品
- 无需任何装备步骤，极大地简化了操作流程
