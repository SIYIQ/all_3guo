# 重写后的背包系统说明

## 概述
本次重写了背包系统，使其更符合标准的RPG游戏流程：**拾取物品 → 添加到背包 → 手动装备到道具槽 → 使用按键消耗 → 消耗后自动消失**。

## 系统流程

### 1. 拾取物品
- 玩家接近场景中的 `ItemPickup` 对象时自动拾取
- 物品直接添加到背包中，不会自动装备到道具槽
- 支持近距离检测拾取

### 2. 背包管理
- 按 `I` 键打开/关闭背包界面
- 背包显示物品，支持相同物品的计数聚合
- 分为"装备"和"消耗品"两个标签页

### 3. 装备消耗品
- 在背包中点击消耗品可装备到道具槽
- 系统有2个消耗品槽位（A槽和B槽）
- 优先装备到空的A槽，如果A槽已满则装备到B槽
- 如果两个槽位都满了，显示提示信息

### 4. 使用消耗品
- 按 `1` 键使用A槽中的消耗品
- 按 `2` 键使用B槽中的消耗品
- 只有装备在道具槽中的消耗品才能被使用
- 使用后自动从道具槽消失，恢复HP/MP

## 主要修改

### PlayerCollector.cs
- 移除了自动装备消耗品的逻辑
- 物品现在直接添加到背包

### PlayerConsumableController.cs
- 重写为直接管理两个道具槽位
- 不再依赖特定的ItemData，而是直接使用槽位中的物品
- 简化了消耗逻辑，确保使用后槽位自动清空

### InventoryUI.cs
- 优化了物品添加逻辑，支持更好的计数聚合
- 保持了原有的装备和消耗品管理逻辑

## 组件依赖

### PlayerCollector
- 需要挂在玩家对象上
- 需要 Collider2D (非触发器) 和 Rigidbody2D
- 引用 InventoryUI 组件

### PlayerConsumableController
- 需要挂在玩家对象上
- 需要与 PlayerCollector 在同一对象上
- 配置按键 (默认 1 和 2)

### InventoryUI
- 管理整个背包界面
- 需要配置装备槽位和网格布局

## 使用说明

1. 在场景中放置 ItemPickup 对象，配置要拾取的物品
2. 确保玩家对象有 PlayerCollector 和 PlayerConsumableController 组件
3. 配置 InventoryUI 组件的装备槽位引用
4. 运行游戏测试完整流程

## 注意事项

- 消耗品必须先装备到道具槽才能使用
- 每个道具槽一次只能装备一种消耗品
- 使用消耗品后槽位自动清空，需要重新装备才能再次使用
